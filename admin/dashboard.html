<!DOCTYPE html>
<html lang="pl">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Panel Administracyjny | Salon Fryzjerski Migdał</title>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
		<link
			href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;600&family=Montserrat:wght@300;400;600&display=swap"
			rel="stylesheet"
		/>
		<style>
			:root {
				--brown: #8b6d5c;
				--light-brown: #a58d7f;
				--cream: #f5f1e8;
				--white: #ffffff;
				--dark: #2d2a26;
				--border-color: #e9ecef;
				--border-radius: 6px;
				--box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			}

			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
				font-family: 'Montserrat', sans-serif;
			}

			body {
				background-color: var(--cream);
				color: var(--dark);
				min-height: 100vh;
				display: none; /* Domyślnie ukryte, pokazujemy po sprawdzeniu logowania */
			}

			h1,
			h2,
			h3,
			h4,
			h5 {
				font-family: 'Cormorant Garamond', serif;
			}

			.admin-container {
				display: flex;
				flex-direction: column;
				min-height: 100vh;
			}

			/* Header */
			.admin-header {
				background-color: var(--brown);
				color: var(--white);
				padding: 15px 30px;
				display: flex;
				justify-content: space-between;
				align-items: center;
				box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
			}

			.admin-header h1 {
				font-size: 24px;
				font-weight: 600;
			}

			.admin-title {
				display: flex;
				align-items: center;
			}

			.admin-logo {
				margin-right: 15px;
				font-size: 28px;
			}

			/* Main Content */
			.admin-main {
				display: flex;
				flex: 1;
			}

			/* Sidebar */
			.admin-sidebar {
				width: 260px;
				background-color: var(--white);
				padding: 30px 0;
				box-shadow: 2px 0 5px rgba(0, 0, 0, 0.05);
			}

			.admin-user {
				padding: 0 20px 20px 20px;
				border-bottom: 1px solid var(--border-color);
				margin-bottom: 20px;
				display: flex;
				align-items: center;
			}

			.admin-avatar {
				width: 40px;
				height: 40px;
				background-color: var(--light-brown);
				color: var(--white);
				border-radius: 50%;
				display: flex;
				align-items: center;
				justify-content: center;
				margin-right: 15px;
				font-size: 16px;
			}

			.admin-user-info h3 {
				font-size: 16px;
				margin-bottom: 5px;
			}

			.admin-user-info p {
				font-size: 12px;
				color: var(--light-brown);
			}

			.admin-menu {
				list-style-type: none;
			}

			.admin-menu-item {
				margin-bottom: 5px;
			}

			.admin-menu-link {
				display: flex;
				align-items: center;
				padding: 12px 20px;
				color: var(--dark);
				text-decoration: none;
				transition: all 0.3s ease;
				border-left: 3px solid transparent;
			}

			.admin-menu-link:hover,
			.admin-menu-link.active {
				background-color: rgba(139, 109, 92, 0.1);
				color: var(--brown);
				border-left-color: var(--brown);
			}

			.admin-menu-icon {
				margin-right: 15px;
				width: 20px;
				text-align: center;
			}

			/* Content Area */
			.admin-content {
				flex: 1;
				padding: 30px;
			}

			.content-header {
				margin-bottom: 30px;
			}

			.content-header h2 {
				font-size: 28px;
				margin-bottom: 10px;
				color: var(--dark);
			}

			.breadcrumb {
				display: flex;
				align-items: center;
				font-size: 14px;
			}

			.breadcrumb a {
				color: var(--light-brown);
				text-decoration: none;
			}

			.breadcrumb a:hover {
				text-decoration: underline;
			}

			.breadcrumb-separator {
				margin: 0 10px;
				color: var(--light-brown);
			}

			/* Cards Grid */
			.cards-grid {
				display: grid;
				grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
				gap: 20px;
				margin-bottom: 30px;
			}

			.stat-card {
				background-color: var(--white);
				border-radius: var(--border-radius);
				padding: 20px;
				box-shadow: var(--box-shadow);
				display: flex;
				align-items: center;
			}

			.stat-icon {
				width: 50px;
				height: 50px;
				background-color: rgba(139, 109, 92, 0.1);
				color: var(--brown);
				border-radius: 50%;
				display: flex;
				align-items: center;
				justify-content: center;
				font-size: 20px;
				margin-right: 15px;
			}

			.stat-details h3 {
				font-size: 14px;
				margin-bottom: 5px;
				color: var(--light-brown);
			}

			.stat-details p {
				font-size: 24px;
				font-weight: 600;
				color: var(--dark);
			}

			/* Content Panels */
			.panel {
				background-color: var(--white);
				border-radius: var(--border-radius);
				padding: 30px;
				box-shadow: var(--box-shadow);
				margin-bottom: 30px;
			}

			.panel-header {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: 20px;
			}

			.panel-title {
				font-size: 20px;
				color: var(--dark);
			}

			/* Forms */
			.form-group {
				margin-bottom: 20px;
			}

			.form-group label {
				display: block;
				margin-bottom: 8px;
				font-weight: 500;
			}

			.form-control {
				width: 100%;
				padding: 10px 15px;
				border: 1px solid var(--border-color);
				border-radius: var(--border-radius);
				font-size: 14px;
				transition: all 0.3s ease;
			}

			.form-control:focus {
				border-color: var(--brown);
				box-shadow: 0 0 0 3px rgba(139, 109, 92, 0.1);
				outline: none;
			}

			textarea.form-control {
				min-height: 100px;
				resize: vertical;
			}

			select.form-control {
				appearance: none;
				background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%238b6d5c' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
				background-repeat: no-repeat;
				background-position: right 15px center;
				padding-right: 35px;
			}

			.btn {
				display: inline-block;
				padding: 10px 20px;
				background-color: var(--brown);
				color: var(--white);
				border: none;
				border-radius: var(--border-radius);
				font-size: 14px;
				font-weight: 500;
				cursor: pointer;
				transition: all 0.3s ease;
				text-decoration: none;
			}

			.btn:hover {
				background-color: var(--light-brown);
			}

			.btn-sm {
				padding: 6px 12px;
				font-size: 12px;
			}

			.btn-danger {
				background-color: #dc3545;
			}

			.btn-danger:hover {
				background-color: #c82333;
			}

			.file-upload {
				position: relative;
				display: inline-block;
				width: 100%;
			}

			.file-upload input[type='file'] {
				position: absolute;
				top: 0;
				left: 0;
				opacity: 0;
				width: 100%;
				height: 100%;
				cursor: pointer;
			}

			.file-upload-label {
				display: flex;
				align-items: center;
				justify-content: center;
				padding: 30px;
				border: 2px dashed var(--border-color);
				border-radius: var(--border-radius);
				background-color: var(--cream);
				color: var(--light-brown);
				text-align: center;
				transition: all 0.3s ease;
			}

			.file-upload:hover .file-upload-label {
				border-color: var(--brown);
				background-color: rgba(139, 109, 92, 0.05);
			}

			.file-upload-icon {
				font-size: 24px;
				margin-right: 10px;
			}

			.preview-container {
				display: flex;
				flex-wrap: wrap;
				gap: 15px;
				margin-top: 20px;
			}

			.image-preview {
				position: relative;
				width: 150px;
				height: 150px;
				border-radius: var(--border-radius);
				overflow: hidden;
				box-shadow: var(--box-shadow);
			}

			.image-preview img {
				width: 100%;
				height: 100%;
				object-fit: cover;
			}

			.image-preview .remove-btn {
				position: absolute;
				top: 5px;
				right: 5px;
				width: 24px;
				height: 24px;
				background-color: rgba(220, 53, 69, 0.8);
				color: white;
				border: none;
				border-radius: 50%;
				display: flex;
				align-items: center;
				justify-content: center;
				cursor: pointer;
				font-size: 12px;
			}

			/* Gallery Grid */
			.gallery-grid {
				display: grid;
				grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
				gap: 20px;
			}

			.gallery-item {
				background-color: var(--white);
				border-radius: var(--border-radius);
				overflow: hidden;
				box-shadow: var(--box-shadow);
				position: relative;
			}

			.gallery-image {
				height: 200px;
				overflow: hidden;
			}

			.gallery-image img {
				width: 100%;
				height: 100%;
				object-fit: cover;
				transition: transform 0.3s ease;
			}

			.gallery-item:hover .gallery-image img {
				transform: scale(1.05);
			}

			.gallery-info {
				padding: 15px;
			}

			.gallery-title {
				font-size: 16px;
				margin-bottom: 5px;
				color: var(--dark);
			}

			.gallery-category {
				font-size: 12px;
				color: var(--light-brown);
				margin-bottom: 10px;
			}

			.gallery-actions {
				display: flex;
				justify-content: space-between;
			}

			/* Responsive */
			@media (max-width: 1024px) {
				.admin-sidebar {
					width: 220px;
				}
			}

			@media (max-width: 768px) {
				.admin-main {
					flex-direction: column;
				}

				.admin-sidebar {
					width: 100%;
					padding: 15px 0;
				}

				.admin-menu-link {
					padding: 10px 15px;
				}

				.admin-content {
					padding: 20px;
				}

				.cards-grid {
					grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
				}
			}

			/* Additional Helper Classes */
			.text-center {
				text-align: center;
			}

			.mt-20 {
				margin-top: 20px;
			}

			.mb-10 {
				margin-bottom: 10px;
			}

			.hidden {
				display: none;
			}

			/* Toast Notification */
			.toast {
				position: fixed;
				top: 20px;
				right: 20px;
				background-color: var(--white);
				color: var(--dark);
				padding: 15px 20px;
				border-radius: var(--border-radius);
				box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
				z-index: 1000;
				opacity: 0;
				transition: opacity 0.3s ease;
				max-width: 300px;
			}

			.toast.success {
				border-left: 4px solid #28a745;
			}

			.toast.error {
				border-left: 4px solid #dc3545;
			}

			.toast.show {
				opacity: 1;
			}

			.toast-content {
				display: flex;
				align-items: center;
			}

			.toast-icon {
				margin-right: 15px;
				font-size: 18px;
			}

			.toast.success .toast-icon {
				color: #28a745;
			}

			.toast.error .toast-icon {
				color: #dc3545;
			}

			.toast-message {
				font-size: 14px;
			}

			.toast-close {
				position: absolute;
				top: 10px;
				right: 10px;
				background: none;
				border: none;
				color: var(--dark);
				cursor: pointer;
				font-size: 14px;
				opacity: 0.6;
			}

			.toast-close:hover {
				opacity: 1;
			}
		</style>
	</head>
	<body>
		<div class="admin-container">
			<!-- Header -->
			<header class="admin-header">
				<div class="admin-title">
					<div class="admin-logo">
						<i class="fas fa-cut"></i>
					</div>
					<h1>Panel Administracyjny - Salon Migdał</h1>
				</div>
				<a href="#" id="logout-btn" class="btn btn-sm btn-danger"> <i class="fas fa-sign-out-alt"></i> Wyloguj </a>
			</header>

			<!-- Main Content -->
			<div class="admin-main">
				<!-- Sidebar -->
				<div class="admin-sidebar">
					<div class="admin-user">
						<div class="admin-avatar">
							<i class="fas fa-user"></i>
						</div>
						<div class="admin-user-info">
							<h3>Administrator</h3>
							<p>admin@migdal.pl</p>
						</div>
					</div>

					<ul class="admin-menu">
						<li class="admin-menu-item">
							<a href="#" class="admin-menu-link active" data-section="dashboard">
								<span class="admin-menu-icon">
									<i class="fas fa-tachometer-alt"></i>
								</span>
								Pulpit
							</a>
						</li>
						<li class="admin-menu-item">
							<a href="#" class="admin-menu-link" data-section="gallery">
								<span class="admin-menu-icon">
									<i class="fas fa-images"></i>
								</span>
								Galeria
							</a>
						</li>
						<li class="admin-menu-item">
							<a href="#" class="admin-menu-link" data-section="add-images">
								<span class="admin-menu-icon">
									<i class="fas fa-plus-circle"></i>
								</span>
								Dodaj zdjęcia
							</a>
						</li>
						<li class="admin-menu-item">
							<a href="#" class="admin-menu-link">
								<span class="admin-menu-icon">
									<i class="fas fa-users"></i>
								</span>
								Klienci
							</a>
						</li>
						<li class="admin-menu-item">
							<a href="#" class="admin-menu-link">
								<span class="admin-menu-icon">
									<i class="fas fa-cog"></i>
								</span>
								Ustawienia
							</a>
						</li>
						<li class="admin-menu-item">
							<a href="../index.html" class="admin-menu-link">
								<span class="admin-menu-icon">
									<i class="fas fa-home"></i>
								</span>
								Strona główna
							</a>
						</li>
					</ul>
				</div>

				<!-- Content Area -->
				<div class="admin-content">
					<!-- Dashboard Section -->
					<div class="content-section" id="dashboard-section">
						<div class="content-header">
							<h2>Pulpit</h2>
							<div class="breadcrumb">
								<a href="#">Pulpit</a>
							</div>
						</div>

						<div class="cards-grid">
							<div class="stat-card">
								<div class="stat-icon">
									<i class="fas fa-images"></i>
								</div>
								<div class="stat-details">
									<h3>Zdjęcia w galerii</h3>
									<p id="gallery-count">6</p>
								</div>
							</div>

							<div class="stat-card">
								<div class="stat-icon">
									<i class="fas fa-users"></i>
								</div>
								<div class="stat-details">
									<h3>Klienci</h3>
									<p>1,345</p>
								</div>
							</div>

							<div class="stat-card">
								<div class="stat-icon">
									<i class="fas fa-star"></i>
								</div>
								<div class="stat-details">
									<h3>Ocena salonu</h3>
									<p>4.9/5</p>
								</div>
							</div>

							<div class="stat-card">
								<div class="stat-icon">
									<i class="fas fa-calendar-check"></i>
								</div>
								<div class="stat-details">
									<h3>Rezerwacje (dziś)</h3>
									<p>12</p>
								</div>
							</div>
						</div>

						<div class="panel">
							<div class="panel-header">
								<h3 class="panel-title">Ostatnio dodane zdjęcia</h3>
								<a href="#" class="btn btn-sm" data-section="add-images">Dodaj nowe</a>
							</div>

							<div class="gallery-grid recent-images">
								<!-- Dane będą wypełniane przez JavaScript -->
							</div>
						</div>
					</div>

					<!-- Gallery Section -->
					<div class="content-section hidden" id="gallery-section">
						<div class="content-header">
							<h2>Galeria</h2>
							<div class="breadcrumb">
								<a href="#" data-section="dashboard">Pulpit</a>
								<span class="breadcrumb-separator">/</span>
								<a href="#">Galeria</a>
							</div>
						</div>

						<div class="panel">
							<div class="panel-header">
								<h3 class="panel-title">Wszystkie zdjęcia</h3>
								<a href="#" class="btn btn-sm" data-section="add-images">Dodaj nowe</a>
							</div>

							<div class="gallery-grid all-images">
								<!-- Dane będą wypełniane przez JavaScript -->
							</div>
						</div>
					</div>

					<!-- Add Images Section -->
					<div class="content-section hidden" id="add-images-section">
						<div class="content-header">
							<h2>Dodaj nowe zdjęcia</h2>
							<div class="breadcrumb">
								<a href="#" data-section="dashboard">Pulpit</a>
								<span class="breadcrumb-separator">/</span>
								<a href="#">Dodaj zdjęcia</a>
							</div>
						</div>

						<div class="panel">
							<div class="panel-header">
								<h3 class="panel-title" id="form-title">Nowe zdjęcie</h3>
							</div>

							<form id="add-image-form">
								<input type="hidden" id="image-id" value="" />
								<div class="form-group">
									<label for="image-title">Tytuł</label>
									<input
										type="text"
										id="image-title"
										class="form-control"
										placeholder="Np. Nowoczesne strzyżenie z grzywką"
										required
									/>
								</div>

								<div class="form-group">
									<label for="image-description">Opis</label>
									<textarea
										id="image-description"
										class="form-control"
										placeholder="Krótki opis fryzury lub usługi"
									></textarea>
								</div>

								<div class="form-group">
									<label for="image-category">Kategoria</label>
									<select id="image-category" class="form-control" required>
										<option value="" disabled selected>Wybierz kategorię</option>
										<option value="women">Damskie</option>
										<option value="men">Męskie</option>
										<option value="color">Koloryzacja</option>
										<option value="special">Okolicznościowe</option>
									</select>
								</div>

								<div class="form-group">
									<label>Zdjęcie</label>
									<div class="file-upload">
										<input type="file" id="image-file" accept="image/*" required />
										<div class="file-upload-label">
											<span class="file-upload-icon">
												<i class="fas fa-cloud-upload-alt"></i>
											</span>
											<span class="file-upload-text"> Przeciągnij i upuść zdjęcie lub kliknij, aby wybrać plik </span>
										</div>
									</div>
									<div id="image-preview-container" class="preview-container hidden">
										<div class="image-preview">
											<img id="image-preview" src="#" alt="Podgląd" />
											<button type="button" id="remove-image" class="remove-btn">
												<i class="fas fa-times"></i>
											</button>
										</div>
									</div>
								</div>

								<div class="form-group">
									<button type="submit" class="btn" id="form-submit-btn">
										<i class="fas fa-save"></i> Zapisz zdjęcie
									</button>
									<button
										type="button"
										class="btn"
										id="cancel-edit-btn"
										style="display: none; margin-left: 10px; background-color: #6c757d"
									>
										<i class="fas fa-times"></i> Anuluj edycję
									</button>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Toast Notification -->
		<div class="toast" id="toast">
			<div class="toast-content">
				<div class="toast-icon">
					<i class="fas fa-check-circle"></i>
				</div>
				<div class="toast-message">Operacja zakończona pomyślnie</div>
			</div>
			<button class="toast-close" id="toast-close">
				<i class="fas fa-times"></i>
			</button>
		</div>

		<script>
			// Sprawdź, czy użytkownik jest zalogowany
			window.onload = function () {
				const isLoggedInLocal = localStorage.getItem('adminLoggedIn') === 'true'
				const isLoggedInSession = sessionStorage.getItem('adminLoggedIn') === 'true'
				const isLoggedIn = isLoggedInLocal || isLoggedInSession

				if (!isLoggedIn) {
					window.location.href = 'login.html'
				} else {
					document.body.style.display = 'block'
					loadGalleryData()
					updateStatistics()
				}
			}

			// Obsługa wylogowania
			document.getElementById('logout-btn').addEventListener('click', function (e) {
				e.preventDefault()
				localStorage.removeItem('adminLoggedIn')
				sessionStorage.removeItem('adminLoggedIn')
				window.location.href = 'login.html'
			})

			// Nawigacja między sekcjami
			const menuLinks = document.querySelectorAll('.admin-menu-link')
			const contentSections = document.querySelectorAll('.content-section')

			menuLinks.forEach(link => {
				if (link.dataset.section) {
					link.addEventListener('click', function (e) {
						e.preventDefault()

						// Ukryj wszystkie sekcje
						contentSections.forEach(section => {
							section.classList.add('hidden')
						})

						// Usuń klasę active ze wszystkich linków
						menuLinks.forEach(menuLink => {
							menuLink.classList.remove('active')
						})

						// Pokaż wybraną sekcję i aktywuj link
						const targetSection = document.getElementById(`${this.dataset.section}-section`)
						if (targetSection) {
							targetSection.classList.remove('hidden')
							this.classList.add('active')
						}
					})
				}
			})

			// Obsługa przycisku dodawania w panelu
			document.querySelectorAll('[data-section]').forEach(element => {
				if (element.tagName === 'A' && !element.classList.contains('admin-menu-link')) {
					element.addEventListener('click', function (e) {
						e.preventDefault()

						// Znajdź odpowiedni link w menu i symuluj jego kliknięcie
						const menuLink = document.querySelector(`.admin-menu-link[data-section="${this.dataset.section}"]`)
						if (menuLink) {
							menuLink.click()
						}
					})
				}
			})

			// Obsługa podglądu zdjęcia
			const imageFileInput = document.getElementById('image-file')
			const imagePreviewContainer = document.getElementById('image-preview-container')
			const imagePreview = document.getElementById('image-preview')
			const removeImageBtn = document.getElementById('remove-image')

			imageFileInput.addEventListener('change', function () {
				if (this.files && this.files[0]) {
					const reader = new FileReader()

					reader.onload = function (e) {
						imagePreview.src = e.target.result
						imagePreviewContainer.classList.remove('hidden')
					}

					reader.readAsDataURL(this.files[0])
				}
			})

			removeImageBtn.addEventListener('click', function () {
				imagePreview.src = '#'
				imagePreviewContainer.classList.add('hidden')
				imageFileInput.value = ''
			})

			// Symulowane dane galerii
			let galleryData = []

			// Próbne dane początkowe
			function initialGalleryData() {
				return [
					{
						id: 1,
						title: 'Nowoczesne strzyżenie z grzywką',
						description: 'Strzyżenie, modelowanie',
						category: 'women',
						imageSrc: '../images/4.jpg',
						date: '2024-03-01',
					},
					{
						id: 2,
						title: 'Baleyage w ciepłych odcieniach',
						description: 'Koloryzacja, pielęgnacja',
						category: 'color',
						imageSrc: '../images/5.jpg',
						date: '2024-03-05',
					},
					{
						id: 3,
						title: 'Klasyczny undercut',
						description: 'Strzyżenie męskie, stylizacja',
						category: 'men',
						imageSrc: '../images/6.jpg',
						date: '2024-03-10',
					},
					{
						id: 4,
						title: 'Eleganckie upięcie ślubne',
						description: 'Fryzury okolicznościowe, upięcia',
						category: 'special',
						imageSrc: '../images/7.jpg',
						date: '2024-03-15',
					},
					{
						id: 5,
						title: 'Pastelowe ombre',
						description: 'Koloryzacja, trendy',
						category: 'color',
						imageSrc: '../images/8.jpg',
						date: '2024-03-20',
					},
					{
						id: 6,
						title: 'Nowoczesny bob z asymetrią',
						description: 'Strzyżenie, stylizacja',
						category: 'women',
						imageSrc: '../images/9.jpg',
						date: '2024-03-25',
					},
				]
			}

			// Wczytanie danych galerii
			function loadGalleryData() {
				// Sprawdź czy są dane w localStorage
				const storedData = localStorage.getItem('galleryData')

				if (storedData) {
					galleryData = JSON.parse(storedData)
				} else {
					// Jeśli nie ma danych, użyj przykładowych
					galleryData = initialGalleryData()
					localStorage.setItem('galleryData', JSON.stringify(galleryData))
				}

				renderGallery()
			}

			// Aktualizacja statystyk
			function updateStatistics() {
				document.getElementById('gallery-count').textContent = galleryData.length
			}

			// Renderowanie galerii
			function renderGallery() {
				const allImagesContainer = document.querySelector('.all-images')
				const recentImagesContainer = document.querySelector('.recent-images')

				// Wyczyść kontenery
				allImagesContainer.innerHTML = ''
				recentImagesContainer.innerHTML = ''

				// Sortowanie po dacie (od najnowszych)
				const sortedData = [...galleryData].sort((a, b) => new Date(b.date) - new Date(a.date))

				// Renderuj wszystkie zdjęcia
				sortedData.forEach(item => {
					const galleryItem = createGalleryItem(item)
					allImagesContainer.appendChild(galleryItem)
				})

				// Renderuj tylko 4 najnowsze zdjęcia
				sortedData.slice(0, 4).forEach(item => {
					const galleryItem = createGalleryItem(item)
					recentImagesContainer.appendChild(galleryItem)
				})
			}

			// Tworzenie elementu galerii
			function createGalleryItem(item) {
				const galleryItem = document.createElement('div')
				galleryItem.className = 'gallery-item'
				galleryItem.dataset.id = item.id

				galleryItem.innerHTML = `
          <div class="gallery-image">
            <img src="${item.imageSrc}" alt="${item.title}">
          </div>
          <div class="gallery-info">
            <h4 class="gallery-title">${item.title}</h4>
            <p class="gallery-category">${getCategoryName(item.category)}</p>
            <div class="gallery-actions">
              <button class="btn btn-sm edit-gallery-item">
                <i class="fas fa-edit"></i> Edytuj
              </button>
              <button class="btn btn-sm btn-danger delete-gallery-item">
                <i class="fas fa-trash"></i> Usuń
              </button>
            </div>
          </div>
        `

				// Dodaj obsługę usuwania
				galleryItem.querySelector('.delete-gallery-item').addEventListener('click', function () {
					deleteGalleryItem(item.id)
				})

				// Dodaj obsługę edycji
				galleryItem.querySelector('.edit-gallery-item').addEventListener('click', function () {
					editGalleryItem(item.id)
				})

				return galleryItem
			}

			// Usuwanie elementu galerii
			function deleteGalleryItem(id) {
				if (confirm('Czy na pewno chcesz usunąć to zdjęcie?')) {
					galleryData = galleryData.filter(item => item.id !== id)
					localStorage.setItem('galleryData', JSON.stringify(galleryData))

					renderGallery()
					updateStatistics()
					showToast('Zdjęcie zostało usunięte', 'success')
				}
			}

			// Edycja elementu galerii
			function editGalleryItem(id) {
				// Znajdź element w danych
				const item = galleryData.find(item => item.id === id)
				if (!item) return

				// Przejdź do sekcji dodawania/edycji
				document.querySelector(".admin-menu-link[data-section='add-images']").click()

				// Zmień tytuł i tekst przycisku na tryb edycji
				document.getElementById('form-title').textContent = 'Edycja zdjęcia'
				document.getElementById('form-submit-btn').innerHTML = '<i class="fas fa-save"></i> Zapisz zmiany'

				// Pokaż przycisk anulowania
				document.getElementById('cancel-edit-btn').style.display = 'inline-block'

				// Wypełnij formularz danymi
				document.getElementById('image-id').value = item.id
				document.getElementById('image-title').value = item.title
				document.getElementById('image-description').value = item.description || ''
				document.getElementById('image-category').value = item.category

				// Pokaż podgląd zdjęcia
				imagePreview.src = item.imageSrc
				imagePreviewContainer.classList.remove('hidden')
			}

			// Obsługa przycisku anulowania edycji
			document.getElementById('cancel-edit-btn').addEventListener('click', function () {
				resetForm()
			})

			// Funkcja resetująca formularz
			function resetForm() {
				// Zmień tytuł i tekst przycisku na tryb dodawania
				document.getElementById('form-title').textContent = 'Nowe zdjęcie'
				document.getElementById('form-submit-btn').innerHTML = '<i class="fas fa-save"></i> Zapisz zdjęcie'

				// Ukryj przycisk anulowania
				document.getElementById('cancel-edit-btn').style.display = 'none'

				// Wyczyść formularz
				document.getElementById('image-id').value = ''
				document.getElementById('add-image-form').reset()
				imagePreviewContainer.classList.add('hidden')
			}

			// Pobranie nazwy kategorii
			function getCategoryName(categoryKey) {
				const categories = {
					women: 'Damskie',
					men: 'Męskie',
					color: 'Koloryzacja',
					special: 'Okolicznościowe',
				}

				return categories[categoryKey] || categoryKey
			}

			// Obsługa formularza dodawania/edycji zdjęć
			document.getElementById('add-image-form').addEventListener('submit', function (e) {
				e.preventDefault()

				const id = document.getElementById('image-id').value
				const title = document.getElementById('image-title').value
				const description = document.getElementById('image-description').value
				const category = document.getElementById('image-category').value

				// Sprawdź, czy to edycja czy dodanie nowego zdjęcia
				if (id) {
					// Tryb edycji - znajdź istniejący element
					const index = galleryData.findIndex(item => item.id == id)
					if (index !== -1) {
						const imageFile = document.getElementById('image-file').files[0]

						// Aktualizuj dane
						const updatedItem = {
							...galleryData[index],
							title: title,
							description: description,
							category: category,
						}

						// Jeśli wybrano nowe zdjęcie, aktualizuj je
						if (imageFile) {
							const reader = new FileReader()

							reader.onload = function (e) {
								updatedItem.imageSrc = e.target.result

								// Aktualizuj element w tablicy
								galleryData[index] = updatedItem
								localStorage.setItem('galleryData', JSON.stringify(galleryData))

								// Resetuj formularz
								resetForm()

								// Odśwież galerię
								renderGallery()

								// Pokaż komunikat o sukcesie
								showToast('Zdjęcie zostało zaktualizowane', 'success')

								// Przejdź do sekcji galerii
								document.querySelector(".admin-menu-link[data-section='gallery']").click()
							}

							reader.readAsDataURL(imageFile)
						} else {
							// Aktualizuj element w tablicy bez zmiany zdjęcia
							galleryData[index] = updatedItem
							localStorage.setItem('galleryData', JSON.stringify(galleryData))

							// Resetuj formularz
							resetForm()

							// Odśwież galerię
							renderGallery()

							// Pokaż komunikat o sukcesie
							showToast('Zdjęcie zostało zaktualizowane', 'success')

							// Przejdź do sekcji galerii
							document.querySelector(".admin-menu-link[data-section='gallery']").click()
						}
					}
				} else {
					// Tryb dodawania nowego zdjęcia
					const imageFile = document.getElementById('image-file').files[0]

					if (!imageFile) {
						showToast('Wybierz zdjęcie', 'error')
						return
					}

					// W rzeczywistej aplikacji tutaj byłby upload pliku na serwer
					// W naszym przypadku używamy lokalnego URL
					const reader = new FileReader()

					reader.onload = function (e) {
						const newItem = {
							id: Date.now(), // Prosty unikalny ID
							title: title,
							description: description,
							category: category,
							imageSrc: e.target.result, // URL obrazu
							date: new Date().toISOString().split('T')[0], // Dzisiejsza data
						}

						// Dodaj nowy element do danych galerii
						galleryData.push(newItem)
						localStorage.setItem('galleryData', JSON.stringify(galleryData))

						// Wyczyść formularz
						resetForm()

						// Odśwież galerię i statystyki
						renderGallery()
						updateStatistics()

						// Pokaż komunikat o sukcesie
						showToast('Zdjęcie zostało dodane', 'success')

						// Przejdź do sekcji galerii
						document.querySelector(".admin-menu-link[data-section='gallery']").click()
					}

					reader.readAsDataURL(imageFile)
				}
			})

			// Toast notification
			function showToast(message, type = 'success') {
				const toast = document.getElementById('toast')
				const toastMessage = toast.querySelector('.toast-message')
				const toastIcon = toast.querySelector('.toast-icon i')

				// Ustaw typ
				toast.className = 'toast'
				toast.classList.add(type)

				// Ustaw ikonę
				if (type === 'success') {
					toastIcon.className = 'fas fa-check-circle'
				} else if (type === 'error') {
					toastIcon.className = 'fas fa-exclamation-circle'
				}

				// Ustaw wiadomość
				toastMessage.textContent = message

				// Pokaż toast
				toast.classList.add('show')

				// Ukryj po 3 sekundach
				setTimeout(() => {
					toast.classList.remove('show')
				}, 3000)
			}

			// Zamknięcie toast notification
			document.getElementById('toast-close').addEventListener('click', function () {
				document.getElementById('toast').classList.remove('show')
			})
		</script>
	</body>
</html>
